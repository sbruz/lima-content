# –®–∞–≥ 0: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–∞—Ä–∫–∞—Å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏

## üéØ –¶–µ–ª—å
–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ —Ç–∞–∫, —á—Ç–æ–±—ã **–ª—é–±–æ–π —à–∞–≥ (1‚Ä¶N)** –º–æ–∂–Ω–æ –±—ã–ª–æ –∑–∞–ø—É—Å–∫–∞—Ç—å:
- –≤ **–æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ** —Å **–ø—É–ª–æ–º –ø–æ—Ç–æ–∫–æ–≤** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é),
- —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–µ–π –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º (–∫–∞—Ç–µ–≥–æ—Ä–∏—è/–ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è/—ç–ø–∏–∑–æ–¥),
- —Å —Ä–µ—Ç—Ä–∞—è–º–∏, –±—ç–∫-–æ—Ñ—Ñ–æ–º, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º,
- —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é **–≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ —à–∞–≥–∏ –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –∫–∞—Ä–∫–∞—Å–∞**.

> –≠—Ç–æ—Ç —à–∞–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –≤—Å—è–∫–∏–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π —à–∞–≥, —á—Ç–æ–±—ã ¬´–≤–ø–∏—Å–∞—Ç—å¬ª –µ–≥–æ –≤ –æ–±—â–∏–π –∫–∞—Ä–∫–∞—Å.

> **Pydantic:** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —à–∞–≥–æ–≤ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –¥–ª—è –Ω–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã–µ Pydantic-–º–æ–¥–µ–ª–∏/—Å—Ö–µ–º—ã. –ù–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏ –Ω–µ –∏–∑–º–µ–Ω—è–π—Ç–µ –º–æ–¥–µ–ª–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö —à–∞–≥–æ–≤, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å.

---

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫ PRD)

```
/content-pipeline
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ config.yaml
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ /src
‚îÇ   ‚îú‚îÄ‚îÄ runtime/                # –ö–∞—Ä–∫–∞—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ runner.py           # –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á (ThreadPoolExecutor)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jobs.py             # –†–∞–∑–±–∏–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∑–∞–¥–∞—á–∏ (–∫–∞—Ç/–ø–æ–¥–∫–∞—Ç/—ç–ø)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rate_limit.py       # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤ API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retrying.py         # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä —Ä–µ—Ç—Ä–∞–µ–≤ (3 –ø–æ–ø—ã—Ç–∫–∏, 5/10—Å)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logging.py          # –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ª–æ–≥–≥–µ—Ä + –∫–æ—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ ID
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ progress.py         # –ü—Ä–æ–≥—Ä–µ—Å—Å/ETA, —Å—á—ë—Ç—á–∏–∫–∏, –º–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors.py           # –ë–∞–∑–æ–≤—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hooks.py            # –•—É–∫–∏ –¥–æ/–ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ steps/                  # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ (1‚Ä¶N) –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –∫–∞—Ä–∫–∞—Å—É
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ step1_localize_categories.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ supabase_client.py
‚îÇ       ‚îú‚îÄ‚îÄ llm_client.py
‚îÇ       ‚îú‚îÄ‚îÄ elevenlabs_client.py
‚îÇ       ‚îî‚îÄ‚îÄ s3_client.py
‚îî‚îÄ‚îÄ /docs/steps/0.md            # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–∏–º–µ—Ä –∫–ª—é—á–µ–π –≤ `config.yaml`:
```yaml
threads: 3                 # –†–∞–∑–º–µ—Ä –ø—É–ª–∞ –ø–æ—Ç–æ–∫–æ–≤
retry:
  attempts: 3
  delays_sec: [5, 10]      # –ø–∞—É–∑—ã –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
logging:
  level: INFO
  file: ./logs/last_run.log
ids:
  namespace: "lima-content" # –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è correlation/job id
```

> –ß–∏—Å–ª–∞ –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ/–∫–≤–æ—Ç—ã. –ï—Å–ª–∏ –Ω–µ—Ç —Ç–æ—á–Ω—ã—Ö –∫–≤–æ—Ç ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å ¬´–º—è–≥–∫–∏–µ¬ª –ø—Ä–µ–¥–µ–ª—ã –∏ –ø–æ–¥–Ω—è—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

## üß© –ö–∞—Ä–∫–∞—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (runtime/runner.py)

**–ó–∞–¥–∞—á–∏** ‚Äî —ç—Ç–æ **—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏** `(category_id, subcategory_id, coach_id)` –∏–ª–∏ –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –®–∞–≥–∞ 1 ‚Äî —Ç–æ–ª—å–∫–æ `category_id`).

–ü—Å–µ–≤–¥–æ–∫–æ–¥:
```python
# runtime/runner.py
from concurrent.futures import ThreadPoolExecutor, as_completed
from .logging import log, with_correlation_id
from .progress import Progress
from .rate_limit import RateLimiter
from .retrying import retry

class StepRunner:
    def __init__(self, step_impl, threads, rate_plan):
        self.step_impl = step_impl            # –æ–±—ä–µ–∫—Ç —Å –º–µ—Ç–æ–¥–æ–º .process(job)
        self.threads = threads
        self.limiter = RateLimiter(rate_plan) # —Ç–æ–∫–µ–Ω—ã/–ª–∏–º–∏—Ç—ã –ø–æ API
        self.progress = Progress()

    def run(self, jobs):
        self.progress.start(total=len(jobs))
        with ThreadPoolExecutor(max_workers=self.threads) as pool:
            futures = []
            for job in jobs:
                futures.append(pool.submit(self._safe_process, job))
            for fut in as_completed(futures):
                exc = fut.exception()
                if exc:
                    log.exception("Task failed", exc_info=exc)
        self.progress.finish()

    @retry()   # 3 –ø–æ–ø—ã—Ç–∫–∏, –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ config.yaml
    @with_correlation_id()  # –¥–æ–±–∞–≤–ª—è–µ—Ç correlation_id –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ª–æ–≥–æ–≤
    def _safe_process(self, job):
        with self.limiter:           # —Å–ª–µ–¥–∏–º –∑–∞ –∫–≤–æ—Ç–∞–º–∏
            self.step_impl.process(job)
            self.progress.tick()
```

---

## üß± –§–æ—Ä–º–∞—Ç —à–∞–≥–∞ (–ø–ª–∞–≥–∏–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

–õ—é–±–æ–π –Ω–æ–≤—ã–π —à–∞–≥ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ ¬´–≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è¬ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞—Ä–∫–∞—Å–∞:

```python
# steps/step1_localize_categories.py
from src.runtime.logging import log

class Step1LocalizeCategories:
    NAME = "step1_localize_categories"

    def load_jobs(self, range_cfg, supabase):
        # –í–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á: [ {"category_id": 1}, {"category_id": 2}, ... ]
        # –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ range_cfg.categories
        ...

    def process(self, job):
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏ (–æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
        # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–π
        log.info("Processing category", extra={"category_id": job["category_id"]})
        ...
```

–ó–∞–ø—É—Å–∫ –∏–∑ `main.py`:
```python
from src.runtime.runner import StepRunner
from src.steps.step1_localize_categories import Step1LocalizeCategories
from src.utils.supabase_client import supabase
from src.config import cfg

step = Step1LocalizeCategories()
jobs = step.load_jobs(cfg["range"], supabase)
runner = StepRunner(step_impl=step, threads=cfg["threads"], rate_plan=cfg["rate_limits"])
runner.run(jobs)
```

---

## üîÅ –†–µ—Ç—Ä–∞–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

```python
# runtime/retrying.py
import time
from .errors import FatalStepError

def retry(attempts=3, delays=(5, 10)):
    def deco(fn):
        def wrapped(*args, **kwargs):
            errors = []
            for i in range(attempts):
                try:
                    return fn(*args, **kwargs)
                except FatalStepError:
                    raise
                except Exception as e:
                    errors.append(e)
                    if i < attempts - 1:
                        time.sleep(delays[min(i, len(delays)-1)])
            raise errors[-1]
        return wrapped
    return deco
```

> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `FatalStepError` –µ—Å–ª–∏ **–Ω–µ –Ω—É–∂–Ω–æ** –ø–æ–≤—Ç–æ—Ä—è—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–ª–µ–Ω–∞).

---

## ‚è± –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ (rate limiting)

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω–Ω—ã–π –ª–∏–º–∏—Ç–µ—Ä:
```python
# runtime/rate_limit.py
import threading, time

class RateLimiter:
    def __init__(self, plan):
        self.plan = plan
        self.lock = threading.Lock()
        self.state = {}

    def __enter__(self):
        with self.lock:
            # –ø—Ä–∏–º–µ—Ä: —Å–ª–µ–¥–∏—Ç—å –∑–∞ RPM/RPS ‚Äî –µ—Å–ª–∏ –ª–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω, —Å–ø–∏–º
            # TODO: —Ö—Ä–∞–Ω–∏—Ç—å timestamps –ø–æ—Å–ª–µ–¥–Ω—Ö –≤—ã–∑–æ–≤–æ–≤ –ø–æ –∫–ª—é—á–∞–º api_name
            pass

    def __exit__(self, exc_type, exc, tb):
        pass
```

> –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ¬´–≤–µ–¥—Ä–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏¬ª (token bucket) –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –ø–æ–¥ OpenAI/ElevenLabs/Supabase.

---

## üßæ –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ª–æ–≥–∏

- –ü–æ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `ts`, `level`, `step`, `job_id`, `correlation_id`, `thread`, `duration_ms`  
- –ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:
```json
{"ts":"2025-11-01T10:01:23.456Z","level":"INFO","step":"step1","job_id":"cat:12","msg":"ok","eta":"00:08:14"}
```
- –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Ñ–∞–π–ª (`logging.file`).

---

## üîí –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

- **Upsert –≤ –ë–î**: —à–∞–≥ –¥–æ–ª–∂–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.  
- **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á**: –∫–ª—é—á –∑–∞–¥–∞—á–∏ = `step_name + entity_key` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `step1:cat:12`).  
- **–õ–æ–∫** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –≤ Supabase –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `locks(step, entity_key, updated_at)`.  
- **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫** –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ—Ä–æ–∂–¥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ –∏/–∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É.

---

## üß™ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ü–µ—Ä–µ–¥ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á:
- –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (`name`, `position` –∏ —Ç.–ø.),
- –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∏–∑ `config.yaml`,
- —É–±–µ–¥–∏—Ç—å—Å—è –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö API (healthcheck).

–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö ‚Äî `FatalStepError` + –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥.

---

## üß∞ –ü—Ä–∏–º–µ—Ä: –∫–∞–∫ –®–∞–≥ 1 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–∞—Ä–∫–∞—Å

1. –í `load_jobs` –ø–æ–¥–Ω–∏–º–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É.  
2. –ö–∞—Ä–∫–∞—Å —Å–æ–∑–¥–∞—ë—Ç –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ –∏ —Ä–∞–∑–¥–∞—ë—Ç –∑–∞–¥–∞–Ω–∏—è –ø–æ –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ –ø–æ—Ç–æ–∫.  
3. –í `process(job)` —à–∞–≥:
   - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç,
   - –≤—ã–∑—ã–≤–∞–µ—Ç LLM —Å —Ä–µ—Ç—Ä–∞—è–º–∏ –∏ rate-limit,
   - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç,
   - –¥–µ–ª–∞–µ—Ç upsert –≤ Supabase,
   - –ø–∏—à–µ—Ç –ª–æ–≥–∏ –∏ –¥–≤–∏–≥–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å.

---

## üßØ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

- **–ì—Ä–∞—Ü–∏–æ–∑–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ:** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º `KeyboardInterrupt` –≤ `main.py`, –¥–æ–∂–∏–¥–∞–µ–º—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–ª–∏–µ–Ω—Ç—ã.  
- **–ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞:** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á `ok/failed/skipped`, –æ–±—â–µ–µ –≤—Ä–µ–º—è, —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ –∑–∞–¥–∞—á–µ, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–º–µ–Ω—å—à–∏—Ç—å threads).

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–∞—Ä–∫–∞—Å–∞

- [ ] `runtime/*` –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ `main.py`  
- [ ] `config.yaml` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ü–∏–∏ `threads`, `retry`, `rate_limits`, `logging`  
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ª–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ —Ñ–∞–π–ª –∏ –∫–æ–Ω—Å–æ–ª—å  
- [ ] –ï—Å—Ç—å `load_jobs` –∏ `process` –≤ –∫–∞–∂–¥–æ–º —à–∞–≥–µ  
- [ ] –†–µ—Ç—Ä–∞–∏ –∏ –±—ç–∫-–æ—Ñ—Ñ —Ä–∞–±–æ—Ç–∞—é—Ç  
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å/ETA –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è  
- [ ] –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤  
- [ ] –ï—Å—Ç—å unit-—Ç–µ—Å—Ç—ã –Ω–∞ `retry`, `rate_limit`, `runner` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üìé –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requirements.txt, –ø—Ä–∏–º–µ—Ä)
```
python-dotenv>=1.0
pydantic>=2.8
PyYAML>=6.0
httpx>=0.27
tqdm>=4.66
loguru>=0.7
supabase>=2.6
```
> –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ.

---

–ì–æ—Ç–æ–≤–æ: –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –®–∞–≥–∞ 0 –ª—é–±–æ–π —à–∞–≥ (1‚Ä¶N) —Å–º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–π –∫–∞—Ä–∫–∞—Å ‚Äî –±–µ–∑ –∫–æ–ø–∏–ø–∞—Å—Ç—ã –ª–æ–≥–∏–∫–∏ –ø–æ—Ç–æ–∫–æ–≤, —Ä–µ—Ç—Ä–∞–µ–≤ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
