# –®–∞–≥ 9: –ë—ã—Å—Ç—Ä—ã–µ –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–∏ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —à–∞–≥–∞–º 4‚Äì5)

## üéØ –¶–µ–ª—å
–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–±–æ—Ä –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–π –∏ —Å—Ü–µ–Ω –Ω–∞–ø—Ä—è–º—É—é –∏–∑ LLM –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ ¬´–∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ ‚Üí –ø–æ–ª ‚Üí —è–∑—ã–∫¬ª, –º–∏–Ω—É—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —à–∞–≥–∏ 4‚Äì5. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `affirmations_new.script` –≤ —Ç–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ –∏ –ø–æ—Å–ª–µ —à–∞–≥–∞ 5.

---

## üß© –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –¢–∞–±–ª–∏—Ü—ã: `categories`, `subcategories` (—Å `localization`), `coaches`, `affirmations_new`.
- –ö–æ–Ω—Ñ–∏–≥ `config.yaml`: –¥–∏–∞–ø–∞–∑–æ–Ω—ã `range.categories/subcategories`, —Å–ø–∏—Å–æ–∫ `languages`, —Å–ø–∏—Å–æ–∫ `versions` (–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∏), `affirmations_per_subcategory`, –ª–∏–º–∏—Ç –ø–æ—Ç–æ–∫–æ–≤, retry-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å `ids.make_affirmations_model`.
- –ü—Ä–æ–º–ø—Ç—ã –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–≤ `coach_prompt_w`/`coach_prompt_m` —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–º `{{AFFIRMATION}}`.
- –î–æ–∫—É–º–µ–Ω—Ç `docs/agents/make_affirmations.md` ‚Äî —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–ª–∞–¥—ë–º –≤ —Ä–æ–ª—å `developer`.

---

## ‚öôÔ∏è –õ–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
1. –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/–ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º, –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–≤ ‚Äî –ø–æ `versions`.
2. –†–∞—Å—Å—á–∏—Ç–∞—Ç—å `target = affirmations_per_subcategory` ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–∏–∑–æ–¥–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π —Å–≤—è–∑–∫–∏.
3. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å job –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ `category √ó subcategory √ó coach √ó gender √ó language` (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ job = –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ √ó –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ √ó –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∏ √ó 2 √ó —è–∑—ã–∫–∏).
4. –î–ª—è –∫–∞–∂–¥–æ–π job:
   - –ù–∞–π—Ç–∏ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –∞—Ñ—Ñ–∏—Ä–º–∞—Ü–∏—é (`subcategories.localization[gender].title[LANG]`). –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å (–¥–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç—á—ë—Ç –ø—Ä–æ–ø—É—Å–∫–æ–≤).
   - –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å `system`‚Äë—Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é `coach_prompt_w|m` –∏ —Ñ–∞–π–ª–∞ `make_affirmations.md`.
   - –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å `user`‚Äë—Å–æ–æ–±—â–µ–Ω–∏–µ —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –±–ª–æ–∫–æ–º `[INPUT]` –∏ JSON `{"affirmation","language","target"}`.
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –≤ OpenAI —á–µ—Ä–µ–∑ `LLMClient` —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ö–µ–º–æ–π –æ—Ç–≤–µ—Ç–∞.
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–ª—É—á–µ–Ω–æ —Ä–æ–≤–Ω–æ `target` —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `affirmations_new` (–ø–æ–∑–∏—Ü–∏–∏ 1‚Ä¶`target`) –∏ –æ–±–Ω–æ–≤–∏—Ç—å `script[gender][language] = {"title","script"}` (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —è–∑—ã–∫–∏ –Ω–µ —Ç—Ä–æ–≥–∞–µ–º).
5. –í –ª–æ–≥–∞—Ö –æ—Ç—Ä–∞–∂–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–π job (–∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–æ–ª–∞ –∏ —è–∑—ã–∫–∞) –∏ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–ø—É—Å–∫–æ–≤.

---

## üîê –ö–æ–Ω—Ç—Ä–∞–∫—Ç c OpenAI
- **system**: `coach_prompt_w|m` + `docs/agents/make_affirmations.md`.
- **user**: `[INPUT]` —Å JSON `{"affirmation","language","target"}`.
- **Response schema**: Pydantic —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —Å–ø–∏—Å–∫–æ–º (`female` –∏–ª–∏ `male`). –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ = `target`.

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–æ–ª–∞/—è–∑—ã–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã (–∏–ª–∏ —è–≤–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ—Ç—á—ë—Ç–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤).
- `affirmations_new.script` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Ö —è–∑—ã–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å; –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –ª–æ–≥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å, –∞ –≤ –∫–æ–Ω—Ü–µ –µ—Å—Ç—å –æ—Ç—á—ë—Ç `done/skipped`.
